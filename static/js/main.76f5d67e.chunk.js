(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,n,t){e.exports=t(13)},,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),c=t(3),s=t.n(c),r=(t(11),t(1)),u=(t(12),t(4)),i=t(5),l={},f=function(){function e(n){Object(u.a)(this,e),this.front=this.parseCube(n),this.back=this.parseCube(n.slice(4))}return Object(i.a)(e,[{key:"parseCube",value:function(e){return{top:e[0],bot:e[1],left:e[2],right:e[3]}}}]),e}();l.toType=function(e){switch(e.type){case"vlx":return new f(e.data);case"pos":return e.data;default:return console.log("Unknown Type"),e.data}};var p=l,d=null,b={},v={boot:function(e){e=e||"localhost",console.log("connnecting to ".concat(e)),(d=new WebSocket("wss://".concat(e,":8080"))).onopen=function(e){console.log("Connected",e),Object.keys(b).forEach(function(e){v.send({type:"sub",payload:e})}),v.send({type:"start"})},d.onmessage=function(e){console.log("Message from server ",e);var n=JSON.parse(e.data),t=p.toType(n);b[n.type].forEach(function(e){e(t)})},d.onclose=function(e){console.log("WebSocket is closed now.")}},send:function(e){d?d.send(JSON.stringify(e)):console.warn("Socket not ready!")},sub:function(e,n,t){b[e]||(b[e]=new Map,v.send({type:"sub",payload:e})),b[e].set(n,t)},unsub:function(e,n){b[e]&&(b[e].delete(n),b[e].size<1&&v.send({type:"unsub",payload:e}))},stop:function(){v.send({type:"stop"})}},y=v,h=400,m=400,w=10,g=(w-1)/2;var k=function(){var e=Object(o.useState)({fy:m/2,fz:h/2,by:m/2,bz:h/2}),n=Object(r.a)(e,2),t=n[0],c=n[1],s=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=s.current.getContext("2d");e.clearRect(0,0,m,h),e.fillRect(m/2,0,1,h),e.fillRect(0,h/2,m,1),e.fillRect(t.fy-g,t.fz-g,w,w)},[s,t]),Object(o.useEffect)(function(){return y.sub("pos","Canvas",function(e){c({fy:m/2+e.y/1500*m,fz:h/2+-e.z/1500*h})}),function(){y.unsub("vlx","Canvas")}},[]),a.a.createElement("div",{className:"canvasBlock"},a.a.createElement("canvas",{id:"myCanvas",ref:s,width:"400",height:"400"}))};var E=function(){var e=Object(o.useState)(""),n=Object(r.a)(e,2),t=n[0],c=n[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("input",{value:t,onChange:function(e){return c(e.target.value)}}),a.a.createElement("button",{onClick:function(){y.boot(t)}},"GO!"),a.a.createElement("button",{onClick:y.stop},"STOP!"),a.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.76f5d67e.chunk.js.map